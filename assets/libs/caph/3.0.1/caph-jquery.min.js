/* CAPH v3.0.0-150917 @ 2015-09-17 10:05:14 */

/**
 * Copyright (c) 2014 Samsung Electronics Co., Ltd All Rights Reserved 
 * PROPRIETARY/CONFIDENTIAL
 *  
 * This software is the confidential and proprietary information of SAMSUNG 
 * ELECTRONICS ("Confidential Information"). You shall not disclose such 
 * Confidential Information and shall use it only in accordance with the terms of 
 * the license agreement you entered into with SAMSUNG ELECTRONICS. SAMSUNG make 
 * no representations or warranties about the suitability of the software, either 
 * express or implied, including but not limited to the implied warranties of 
 * merchantability, fitness for a particular purpose, or non-infringement. 
 * SAMSUNG shall not be liable for any damages suffered by licensee as a result 
 * of using, modifying or distributing this software or its derivatives.
 */

!function(a,b,c){"use strict";function d(a){return a&&a+""}function e(a){var b=c(a).data(),e={};return Object.keys(n.DIRECTION).forEach(function(a){var c=n.DIRECTION[a],f="focusableNextFocus"+i(c),g=b[f];(g||null===g)&&(e[c]=d(g))}),{depth:b.focusableDepth,group:d(b.focusableGroup),name:d(b.focusableName),initialFocus:b.focusableInitialFocus,disabled:b.focusableDisabled,nextFocus:e}}function f(a,b){return a=c(a),a.data({focusableDepth:c.isNumeric(b.depth)?b.depth:n.DEFAULT.DEPTH,focusableGroup:b.group||n.DEFAULT.GROUP,focusableName:b.name||p.get(),focusableInitialFocus:b.initialFocus===!0,focusableDisabled:b.disabled===!0}),b.nextFocus&&Object.keys(b.nextFocus).forEach(function(c){var d="focusableNextFocus"+i(c),e=b.nextFocus[c];(e||null===e)&&a.data(d,e)}),a.data("focusableName")}function g(a){return a&&a instanceof c?a[0]:a}function h(a){return a&&a.nodeType===Node.ELEMENT_NODE?!0:!1}function i(a){return a?a.charAt(0).toUpperCase()+a.substr(1):a}function j(){function d(a){var b=c(a),d=b.offset();return{left:d.left,top:d.top,width:b.width(),height:b.height()}}function e(){function e(a,b,c){i.call(a).forEach(function(a){t.isElement(a)&&t.isFocusable(a)&&(c===!0?b(t.setData(a),a):b(t.getData(a).name,a))})}var f,i=Array.prototype.slice,j={},k={getInitial:function(a,b){var d;return a=a||n.DEFAULT.DEPTH,b=b||n.DEFAULT.GROUP,Object.keys(j).some(function(e){var f=j[e],g=t.getData(f);return!t.isVisible(f)||g.disabled&&!c.caph.focus.controllerProvider.isFocusWhenDisabled()||g.depth!==a||g.group!==b?void 0:(d=f,!0)}),d},getNearest:function(a,b){var e,f,i,k,l,m=1/0;return t.isFocusable(a=t.getElement(a))&&(l=t.getData(a))&&(i=d(a),Object.keys(j).forEach(function(n){var o=j[n],p=c(o).parent().data()||{},q=t.getData(o);if(o!==a&&t.isVisible(o)&&(!q.disabled||c.caph.focus.controllerProvider.isFocusWhenDisabled())&&l.depth===t.getData(o).depth){if(p.listItem===!0&&!p.isVisibleListItem(p.listItemRowIndex,p.listItemColumnIndex))return;k=d(o),e=g[h](i,k,b),m>e&&(f=o,m=e)}})),f},$$put:function(a,b){var c;return t.isFocusable(a=t.getElement(a))&&(c=t.setData(a,b))&&(j[c]=t.getElement(a)),this},$$get:function(a){return j[a]},$$remove:function(a){var b,c;return"string"!=typeof a&&(a=t.getData(a)),a&&(b=a.name,c=j[b],c&&delete j[b]),c}};return a.MutationObserver&&(f=new MutationObserver(function(a){a.forEach(function(a){"childList"===a.type&&(e(a.addedNodes,function(a,b){c.caph.focus.$$toAvailable(b)},!0),e(a.removedNodes,function(a,b){t.unbindEvent(k.$$remove(b))}))})}),f.observe(b,{childList:!0,subtree:!0})),k}var f=null,g={},h=n.DEFAULT.DISTANCE_CALCULATION_STRATEGY;g[n.DEFAULT.DISTANCE_CALCULATION_STRATEGY]=function(){function a(a,b){var c={x:a.left,y:a.top};switch(b){case n.DIRECTION.RIGHT:c.x+=a.width;case n.DIRECTION.LEFT:c.y+=a.height/2;break;case n.DIRECTION.DOWN:c.y+=a.height;case n.DIRECTION.UP:c.x+=a.width/2}return c}function b(a,b,c){switch(c){case n.DIRECTION.LEFT:return a.x>=b.x;case n.DIRECTION.RIGHT:return a.x<=b.x;case n.DIRECTION.UP:return a.y>=b.y;case n.DIRECTION.DOWN:return a.y<=b.y}return!1}var c={left:"right",right:"left",up:"down",down:"up"};return function(d,e,f){var g=a(d,f),h=a(e,c[f]);return b(g,h,f)?Math.sqrt(Math.pow(g.x-h.x,2)+Math.pow(g.y-h.y,2)):1/0}}(),this.registerDistanceCalculationStrategy=function(a,b,d){if(d===!1&&c.isFunction(g[a]))throw new Error('The given name "'+a+'" is already registered. If you want to override it, please do not pass the third parameter.');return g[a]=b,this},this.useDistanceCalculationStrategy=function(a){return a?c.isFunction(g[a])?h=a:console.warn('The given name "'+a+'" is not registered yet. Using "'+h+'" instead.'):h=n.DEFAULT.DISTANCE_CALCULATION_STRATEGY,this},this.getRegisteredDistanceCalculationStrategies=function(){return Object.keys(g)},this.getCurrentDistanceCalculationStrategy=function(){return h},this.getInstance=function(){return null===f?f=e():f}}function k(){function d(a,b){return c.isFunction(b)?(a.push(b),!0):!1}function e(a,b){return a.order-b.order}function f(a,b){var c=a.indexOf(b);return c>-1?(a.splice(c,1),!0):!1}function g(a,b){c.isFunction(b)&&(r[a]=b)}function h(){function d(a){var b,c,d,f;if(B){if(c=t.getData(B).nextFocus[a],void 0===c)return C.getNearest(B,a);if(c){if(0===c.indexOf(k))return c.replace(k,"");if(d=C.$$get(c),t.isVisible(d)&&(f=t.getData(d),(!f.disabled||s)&&t.getData(B).depth===f.depth))return d}return null}return b=w(G),b?b:e()}function e(a,b){return w(F,a,b)||C.getInitial(x(a),y(b))}function f(a,b){var c;t.isFocusable(a=t.getElement(a))&&(c=t.getData(a),c.depth===D&&(i(a,"blurred",[b]),a===B&&(u(G,a),B=null)))}function g(a,b){var c;t.isFocusable(a=t.getElement(a))&&a!==B&&(c=t.getData(a),c.depth!==D||c.disabled&&!s||(B&&f(B,b),i(a,"focused",[b]),E=c.group,B=a))}function h(a,b){t.isFocusable(a=t.getElement(a))&&t.isVisible(a)?a!==B||t.getData(a).disabled?g(a,b):i(a,"selected",[b]):(a=w(G),a?g(a,b):g(a=e(),b))}function i(a,b,d){a&&c(a).trigger(b,d)}function u(a,b,c,d){c=x(c),d=y(d),a[c]=a[c]||{},a[c][d]=b}function w(a,b,c){var d;return b=x(b),c=y(c),!t.isVisible(d=a[b]&&a[b][c])||t.getData(d).disabled&&!s?null:d}function x(a){return void 0===a?D:a}function y(a){return void 0===a?E:a}function z(a){return a?"string"==typeof a?C.$$get(a):a:B}function A(a,b,c){var d;t.isFocusable(a=t.getElement(a))&&(d=t.getData(a),d.disabled!==b&&(d.disabled=b,t.setData(a,d),c&&c(a)))}var B,C=c.caph.focus.nearestFocusableFinderProvider.getInstance(),D=l,E=m[l]||n.DEFAULT.GROUP,F={},G={},H={getCurrentDepth:function(){return D},getCurrentGroup:function(){return E},getCurrentFocusItem:function(){return B},setDepth:function(a,b,d){var h,i;return c.isNumeric(a)&&D!==a&&(h=d===!1?e(a,i=m[a]||c.caph.focus.Constant.DEFAULT.GROUP):w(G,a,i=b||m[a]||c.caph.focus.Constant.DEFAULT.GROUP)||e(a,i),h&&(f(B),D=a,E=i,g(h))),this},setGroup:function(a){var b;return a&&E!==a&&(b=w(G,D,a)||e(D,a))&&(f(B),E=a,g(b)),this},focus:function(a,b){return g(z(a),b),this},blur:function(a,b){return f(z(a),b),this},select:function(a,b){return h(z(a),b),this},enable:function(a){return A(z(a),!1,function(a){c(a).removeClass(v)}),this},disable:function(a){return A(z(a),!0,function(a){a===B&&f(B,c.Event("disabled")),c(a).addClass(v)}),this},$$getNextFocusItem:d,$$getInitialFocusItem:e,$$setInitialFocusItem:function(a){var b;return t.isFocusable(a=t.getElement(a))&&(b=t.getData(a),b.initialFocus&&u(F,a,b.depth,b.group)),this},$$invoke:function(a,b,c){var d=r[a];d&&d(b,c)},$$unbind:function(){c(b).off(j)}};return c(a).on("load",function(a){setTimeout(function(){g(w(F),a)},0)}),c(b).on("keydown"+j,function(a){var b,c=a.keyCode||a.which||a.charCode;if(!p.some(function(b){return b({event:a,previousFocusedItem:w(G),currentFocusItem:B},H)===!1})){switch(c){case o.LEFT:b=d(n.DIRECTION.LEFT);break;case o.RIGHT:b=d(n.DIRECTION.RIGHT);break;case o.UP:b=d(n.DIRECTION.UP);break;case o.DOWN:b=d(n.DIRECTION.DOWN);break;case o.ENTER:h(B,a)}b&&("string"==typeof b?H.setGroup(b):(f(B,a),g(b,a))),q.forEach(function(b){b({event:a,previousFocusedItem:w(G),currentFocusItem:B},H)})}}),H}var i=null,j=".focus-controller",k="group:",l=n.DEFAULT.DEPTH,m={},o=n.DEFAULT.KEY_MAP,p=[],q=[],r={focused:c.noop,blurred:c.noop,selected:c.noop},s=!1;m[n.DEFAULT.DEPTH]=n.DEFAULT.GROUP,this.setInitialDepth=function(a){return l=a,this},this.setInitialGroupOfDepth=function(a,b){var d={};return void 0===b&&(b=a,a=n.DEFAULT.DEPTH),c.isPlainObject(b)?d=b:d[a]=b,c.extend(m,d),this},this.setKeyMap=function(a){return c.extend(o,a),this},this.getKeyMap=function(){return c.extend({},o)},this.addBeforeKeydownHandler=function(a,b){return d(p,a)?(a.order=b||0,p.sort(e),!0):!1},this.addAfterKeydownHandler=function(a){return d(q,a)},this.removeBeforeKeydownHandler=function(a){return f(p,a)},this.removeAfterKeydownHandler=function(a){return f(q,a)},this.setFocusWhenDisabled=function(a){return s=a,this},this.isFocusWhenDisabled=function(){return s},this.getInstance=function(){return null===i?i=h():i},this.onFocused=function(a){return g("focused",a),this},this.onBlurred=function(a){return g("blurred",a),this},this.onSelected=function(a){return g("selected",a),this}}function l(a,b){switch(b){case"focused":c(a).addClass(u);break;case"blurred":c(a).removeClass(u)}}function m(a){a=c(a),a.data().focusableDisabled?a.addClass(v):a.removeClass(v)}var n={DIRECTION:{LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"},DEFAULT:{DEPTH:0,GROUP:"default",KEY_MAP:{LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13},DISTANCE_CALCULATION_STRATEGY:"default"}},o=0,p={get:function(){return"focusable-"+o++}},q=".focusable",r={mouseover:"focus",mouseout:"blur",click:"select"},s=["focused","blurred","selected"],t={NameGenerator:p,isFocusable:function(a){return h(a=g(a))&&null!==a.getAttribute("focusable")},isElement:function(a){return h(g(a))},isVisible:function(a){if(h(a=g(a))){for(;a;){if("none"===c.css(a,"display")||"hidden"===c.css(a,"visibility"))return!1;a=a.parentElement}return!0}return!1},getElement:function(a){return h(a=g(a))?a:null},getData:function(a){return t.isFocusable(a)?e(g(a)):null},setData:function(a,b){return t.isFocusable(a)?f(a=g(a),b&&c.extend(e(a),b)||e(a)):null},bindMouseEvent:function(a,b){return t.isElement(a)&&Object.keys(r).forEach(function(d){c(a).on(d+q,{method:r[d]},b)}),this},bindFocusableEvent:function(a,b){return t.isElement(a)&&s.forEach(function(d){c(a).on(d+q,b)}),this},unbindEvent:function(a){return t.isElement(a)&&c(a).off(q),this}},u="focused",v="disabled";c.caph=c.caph||{},c.caph.focus=c.caph.focus||{},c.extend(c.caph.focus,{Constant:n,Util:t,controllerProvider:new k,nearestFocusableFinderProvider:new j,activate:function(a){c.isFunction(a)&&a(c.caph.focus.nearestFocusableFinderProvider,c.caph.focus.controllerProvider),c("[focusable]").each(function(){c.caph.focus.$$toAvailable(this)})},$$toAvailable:function(a){var b=c.caph.focus.nearestFocusableFinderProvider.getInstance(),d=c.caph.focus.controllerProvider.getInstance();return b.$$get(t.getData(a).name)||(b.$$put(a),d.$$setInitialFocusItem(a),m(a),t.bindMouseEvent(a,function(a){var b=a.currentTarget||a.target;d.$$ignoreMouseEvent!==!0&&t.getData(b).depth===d.getCurrentDepth()&&d[a.data.method](b,a)}),t.bindFocusableEvent(a,function(b,c){l(a,b.type),d.$$invoke(b.type,b,c)})),a}})}(this,document,jQuery),function(a){"use strict";a.fn.caphButton=function(b){b=b||{};var c=a.extend({},a.fn.caphButton.defaults,b);return this.each(function(){var d=b.toggle||!1,e=!1,f=a(this);f.attr("focusable",""),a.caph.focus.Util.setData(this,b.focusOption),a.caph.focus.$$toAvailable(this),f.addClass(c.className),f.on("focused",function(c,d){a.isFunction(b.onFocused)&&b.onFocused(c,d)}),f.on("blurred",function(c,d){a.isFunction(b.onBlurred)&&b.onBlurred(c,d)}),f.on("selected",function(c,g){d?(e=!e,a.isFunction(b.onSelected)&&b.onSelected(c,g,e),f.toggleClass("selected")):a.isFunction(b.onSelected)&&b.onSelected(c,g)})})},a.fn.caphButton.defaults={className:"caph-button"}}(jQuery),function(a){"use strict";a.fn.caphCheckbox=function(b){b=b||{};var c=a.extend({},a.fn.caphCheckbox.defaults,b);return this.each(function(){var d=a(this);d.attr("focusable",""),a.caph.focus.Util.setData(this,b.focusOption),a.caph.focus.$$toAvailable(this),d.addClass(c.className);var e=c.checked||!1;e&&(d.addClass("checked"),d.attr("checked","")),d.on("focused",function(c,d){a.isFunction(b.onFocused)&&b.onFocused(c,d)}),d.on("blurred",function(c,d){a.isFunction(b.onBlurred)&&b.onBlurred(c,d)}),d.on("selected",function(c,f){e=!e,d.attr("checked")?d.removeAttr("checked"):d.attr("checked",""),a.isFunction(b.onSelected)&&b.onSelected(c,f,e),d.toggleClass("checked")})})},a.fn.caphCheckbox.defaults={className:"caph-checkbox"}}(jQuery),function(a){"use strict";var b={DEFAULT:{focusableDepth:1e4}},c={itemCount:0,createUniqueId:function(){return this.itemCount++ +"_"+Math.random().toString(36).substr(2,6)},translateTo:function(a,b,c){a&&a.css("transform","translate3d("+b+"px,"+c+"px, 0)")},getSuitablePosition:function(b,c,d){var e=b.offset();for(var f in c)if(e.left+c[f].x>0&&e.left+c[f].x+b.outerWidth()<a(window).width()&&(d||e.top+c[f].y>0&&e.top+c[f].y+b.outerHeight()<a(window).height()))return c[f];return c.length>0?c[0]:void 0},getCalculatedOffset:function(a,b){var c=a.offset();return{x:b.x-c.left,y:b.y-c.top}},convertTemplateToHtml:function(a,b){var c=a.replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,function(a,c){return b[c]||""});return c},makeSubMenu:function(b,c,d,e,f,g){c.option=c.option||{};var h=a('<div class="caph-context-menu"></div>').data("option",c.option||{}).data("focusableDepth",c.focusableDepth).data("parentId",c.parentId).data("previousDepth",c.previousDepth);"root"!==b&&h.attr("id","sub_"+b),c.option["class"]&&h.addClass(c.option["class"]);var i=a("<ul></ul>").data({subMenuId:b,scrollCount:0,visibleItemCount:c.option.visibleItemCount});if(c.itemList)for(var j in c.itemList){var k=e?this.convertTemplateToHtml(e,c.itemList[j]):c.itemList[j].content,l=a('<li focusable id="'+c.itemList[j].id+'"></li>').append(k);d[c.itemList[j].id]&&l.addClass("hasSubMenu"),a.caph.focus.Util.setData(l,{depth:c.focusableDepth,initialFocus:0===j,disabled:c.itemList[j].disabled}),c.itemList[j].disabled&&l.addClass("disabled"),a.caph.focus.$$toAvailable(l),i.append(l)}if(c.option&&c.option.visibleItemCount&&c.option.visibleItemCount<c.itemList.length){var m=a('<div class="arrow-up"></div>').append(f),n=a('<div class="arrow-down"></div>').append(g);h.append(m).append(i).append(n)}else h.append(i);return"root"!==b&&h.hide(),h},createSubMenuData:function(b,c,d){var e={};for(var f in b){if(b[f].parent||(b[f].parent="root"),!b[f].id||!b[f].content)throw a.error("each data should have properties 'id' and 'content'");if(e[b[f].id])throw a.error("Item's id is duplicated. (id = '"+b[f].id+"')");e[b[f].id]=b[f]}var g={},h=function(a,b){g[a]={focusableDepth:b+Object.keys(g).length,previousDepth:void 0,menuDepth:void 0,itemList:[],option:{},show:!1}};h("root",c);for(var i in b)g[b[i].parent]||h(b[i].parent,c),g[b[i].parent].itemList.push(b[i]);for(var j in g){if("root"===j)g[j].menuDepth=0;else{if(!e[j])throw a.error("Parent item is not exist for the item (id = '"+j+"')");for(var k=j,l=1,m=g[e[k].parent].focusableDepth;e[k]&&"root"!==e[k].parent;)k=e[k].parent,l++;g[j].previousDepth=m,g[j].menuDepth=l,g[j].parentId=e[j].parent}d[g[j].menuDepth]&&(g[j].option=d[g[j].menuDepth])}return g},showSubMenu:function(b,d){var e=a("#sub_"+b),f=e.data("option");e.show(),d.addClass("opened");var g=e.parent().offset(),h=d.offset(),i=f.offset||{x:0,y:0},j=c.getSuitablePosition(e,[{x:d.outerWidth()+h.left-g.left+i.x,y:h.top-g.top+i.y},{x:h.left-g.left-e.outerWidth()-i.x,y:h.top-g.top+i.y}],!0);c.translateTo(e,j.x,j.y),a.caph.focus.controllerProvider.getInstance().setDepth(e.data("focusableDepth"));var k=e.find(">ul>li");f.visibleItemCount=Math.min(k.length,f.visibleItemCount),f.visibleItemCount&&(f.style||(f.style={}),f.style.height=k.outerHeight()*f.visibleItemCount,f.style.overflow="hidden"),f.style&&e.find("ul:first").css(f.style)},hideSubMenu:function(b){var c=a("#sub_"+b).closest(".caph-context-menu").parent().data("menuList");if(c){a("#"+b).removeClass("opened"),a("#sub_"+b).hide();for(var d in c)c[d].parentId===b&&(a("#"+d).removeClass("opened"),a("#sub_"+d).hide());var e=a.caph.focus.controllerProvider.getInstance();e.getCurrentDepth()===c[b].focusableDepth&&e.setDepth(c[b].previousDepth)}},hideAllSubMenu:function(b){for(var c in b)"root"!==c&&(a("#"+c).removeClass("opened"),a("#sub_"+c).hide());a.caph.focus.controllerProvider.getInstance().setDepth(b.root.focusableDepth)},scrollUpDown:function(a,b,c,d){var e=a.find("li");d=Math.abs(d)||1,"up"===b&&a.data("scrollCount")>0?a.data("scrollCount",a.data("scrollCount")-d):"down"===b&&a.data("scrollCount")<e.length-c&&a.data("scrollCount",a.data("scrollCount")+d),this.translateTo(e,0,a.data("scrollCount")*e.eq(0).outerHeight()*-1)}},d=function(b){var d=a(b.currentTarget),e=d.attr("id"),f=a(b.currentTarget).closest(".caph-context-menu").parent(),g=f.data("menuList");g&&g[e]?"none"===a("#sub_"+e).css("display")?c.showSubMenu(e,d):c.hideSubMenu(e):(f.data("option").onSelectItem||a.noop)(d.attr("id"),event)},e=function(b){var d=a(b.currentTarget).attr("id"),e=a("#sub_"+d),f=setTimeout(function(){c.hideSubMenu(d),e.data("timeout",void 0)},700);e.data("timeout",f)},f=function(b){var d=a(b.currentTarget).next();c.scrollUpDown(d,"up",d.data("visibleItemCount"))},g=function(b){var d=a(b.currentTarget).prev();c.scrollUpDown(d,"down",d.data("visibleItemCount"))},h=function(b){a.caph.focus.controllerProvider.getInstance().setDepth(a(b.currentTarget).data("focusableDepth")),a.caph.focus.controllerProvider.getInstance().focus(b.currentTarget)},i=function(b){var d=a(b.currentTarget),e=d.find("ul:first").data("subMenuId");if("root"!==e&&e){var f=setTimeout(function(){c.hideSubMenu(e),d.data("timeout",void 0)},50);d.data("timeout",f)}},j=function(b){var c=a(b.currentTarget),d=c.find("ul:first").data("subMenuId");if("root"!==d){var e=c.data("parentId");if(c.data("timeout")&&(clearTimeout(c.data("timeout")),c.data("timeout",void 0)),e){var f=a("#sub_"+e);clearTimeout(f.data("timeout")),f.data("timeout",void 0)}}},k=function(){var b=a(".caph-context-menu").parent();b.each(function(){"none"!==a(this).css("display")&&o.close.apply(a(this))})},l=function(b){var d,e,f;if(b.event.keyCode===a.caph.focus.Constant.DEFAULT.KEY_MAP.LEFT){var g=a(b.currentFocusItem).closest(".caph-context-menu").parent(),h=a(b.currentFocusItem).parent().data("subMenuId");if("root"===h)return o.close.apply(g),!1;c.hideSubMenu(h)}else if(b.event.keyCode===a.caph.focus.Constant.DEFAULT.KEY_MAP.DOWN){if(d=a(b.currentFocusItem).parent(),d.data("visibleItemCount")){e=d.find("li"),f=jQuery.inArray(b.currentFocusItem,e);var i=f-d.data("scrollCount")-d.data("visibleItemCount")+1;f-d.data("scrollCount")>=d.data("visibleItemCount")&&c.scrollUpDown(d,"down",d.data("visibleItemCount"),i)}}else b.event.keyCode===a.caph.focus.Constant.DEFAULT.KEY_MAP.UP&&(d=a(b.currentFocusItem).parent(),d.data("visibleItemCount")&&(e=d.find("li"),f=jQuery.inArray(b.currentFocusItem,e),f-d.data("scrollCount")<0&&c.scrollUpDown(d,"up",d.data("visibleItemCount"),d.data("scrollCount")-f)))},m=function(){a(document).off("click",k)},n=function(b){var c=a(b.currentTarget).data("originDepth");a.caph.focus.controllerProvider.getInstance().setDepth(c),a(document).on("click",k)},o={init:function(d,e){var f=d.menuOption||{},g=d.items||{},h={};if(h.focusableDepth=d.focusableDepth||b.DEFAULT.focusableDepth,h.position=d.position,h.onSelectItem=d.onSelectItem||a.noop,h.onBlurItem=d.onBlurItem||a.noop,h.onFocusItem=d.onFocusItem||a.noop,!e&&this.data("initialized"))throw a.error("This element is already initialized as a context menu.");var i=c.createSubMenuData(g,h.focusableDepth,f),j=this.find(".caph-context-menu-item-template:first").hide().html(),k=this.find(".caph-context-menu-arrow-up-template:first").hide().html(),l=this.find(".caph-context-menu-arrow-down-template:first").hide().html();for(var m in i)this.append(c.makeSubMenu(m,i[m],i,j,k,l));return this.data("initialized",!0),this.data("option",h),this.data("menuOption",f),this.data("menuList",i),this.hide(),this},update:function(b){this.data("previous_focused_id",a(a.caph.focus.controllerProvider.getInstance().getCurrentFocusItem()).attr("id")),o.close.call(this),this.find(".caph-context-menu").remove();var c=this.data("option");return o.init.call(this,{items:b,menuOption:this.data("menuOption"),focusableDepth:c.focusableDepth,position:c.position,onSelectItem:c.onSelectItem,onBlurItem:c.onBlurItem,onFocusItem:c.onFocusItem},!0),this},open:function(b){b=b||this.data("option").position,this.show();var o=this.find(".caph-context-menu:first");if(b&&jQuery.isNumeric(b.x)&&jQuery.isNumeric(b.y)){c.translateTo(o,0,0);var p=c.getCalculatedOffset(o,b);c.translateTo(o,p.x,p.y)}var q=o.find(">ul>li"),r=o.data("option");r.visibleItemCount=Math.min(q.length,r.visibleItemCount),r.visibleItemCount>0&&(r.style||(r.style={}),r.style.height=q.outerHeight()*r.visibleItemCount,r.style.overflow="hidden"),r.style&&o.find("ul:first").css(r.style);var s=a.caph.focus.controllerProvider.getInstance();if(this.data("originDepth",s.getCurrentDepth()),s.setDepth(this.data("option").focusableDepth),!s.getCurrentFocusItem()){var t=o.find("#"+this.data("previous_focused_id"));t.length>0?s.focus(t):s.focus(o.find(">ul>li:first-child"))}return a.caph.focus.controllerProvider.addAfterKeydownHandler(l),this.find(".arrow-up").on("click",f),this.find(".arrow-down").on("click",g),this.find(".caph-context-menu > ul > li").on("mouseover",h).on("focused",this.data("option").onFocusItem).on("blurred",this.data("option").onBlurItem).on("selected",d).on("click",e),this.find(".caph-context-menu").on("mouseover",j).on("mouseleave",i),this.on("mouseover",m).on("mouseleave",n),setTimeout(function(){a(document).on("click",k)},10),this},close:function(){c.hideAllSubMenu(this.data("menuList")),this.hide();var b=a.caph.focus.controllerProvider.getInstance();return b.setDepth(this.data("originDepth")),a.caph.focus.controllerProvider.removeAfterKeydownHandler(l),this.find(".arrow-up").off("click",f),this.find(".arrow-down").off("click",g),this.find(".caph-context-menu > ul > li").off("mouseover",h).off("focused",this.data("option").onFocusItem).off("blurred",this.data("option").onBlurItem).off("selected",d).off("click",e),this.find(".caph-context-menu").off("mouseover",j).off("mouseleave",i),this.off("mouseover",m).off("mouseleave",n),setTimeout(function(){a(document).off("click",k)},10),this}};a.fn.caphContextMenu=function(b){return this.length<1&&a.error("jQuery object is NOT selected."),o[b]?o[b].apply(this,Array.prototype.slice.call(arguments,1)):this.data("initialized")||"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.dialog"):(this.length>1&&a.error("Select just one element for creating a dialog."),o.init.apply(this,arguments))}}(jQuery),function(a){"use strict";var b={DEFAULT:{focusableDepth:9999}},c={dialogCount:0,_dialogs:{},_dim:void 0,generateDialogId:function(){return this.dialogCount++ +"_"+(new Date).getTime()},addDialog:function(b,c,d){this.getDialog(b)?a.error("Dialog ID ("+b+") is already registered."):this._dialogs[b]={element:c,option:d,isOpened:!1}},removeDialog:function(a){this._dialogs[a]&&(delete this._dialogs[a],this.dialogCount--)},getDialog:function(a){return this._dialogs[a]},createDim:function(){this._dim||(this._dim=a('<div class="caph-dim-init"></div>'),a("body").append(this._dim))},activateDim:function(){this._dim||this.createDim(),this._dim.addClass("caph-dim-translucent")},deactivateDim:function(){this._dim&&this._dim.removeClass("caph-dim-translucent")},manageModal:function(b,c){var d=this.getDialog(b);if(d||a.error("Dialog ("+b+") is not registered. Is this id correct?"),d.isOpened=c,d.option.modal){c?this.activateDim():this.deactivateDim();for(var e in this._dialogs)e!==b&&this._dialogs[e].option.modal&&this._dialogs[e].isOpened&&(this._dialogs[e].element.hide(),this._dialogs[e].isOpened=!1)}}},d={translateTo:function(a,b,c){if(a&&a.length>0){var d="translate3d("+b+"px,"+c+"px, 0)";a.css({transform:d})}},moveToCenter:function(b){if(b&&b.length>0){var c=Math.max(a(window).width()/2-b.width()/2,0),d=Math.max(a(window).height()/2-b.height()/2,0);c-=b.offset().left,this.translateTo(b,c,d)}},makeTitleWrapper:function(){return a('<div class="title-area"><div class="title-wrapper"><div class="title"></div></div></div>')},makeContentWrapper:function(){return a('<div class="content-area"><div class="content"></div></div>')},makeDialogButton:function(b,c,d,e){var f=a('<div focusable class="caph-dialog-button"></div>'),g=a('<div class="button-text"></div>').html(b);return f.append(g).on("selected",function(a){d&&d(c,a)}),e&&a.caph.focus.Util.setData(f,e),window.MutationObserver||a.caph.focus.$$toAvailable(f[0]),f}},e={init:function(e){if(e=e||{},e.modal=!0,e.focusOption=e.focusOption||{depth:b.DEFAULT.focusableDepth,group:"default"},e.focusOption.group=e.focusOption.group||"default",this.addClass("caph-dialog"),this.data("initialized"))throw a.error("This element is already initialized as a dialog.");var f=this.find(".caph-dialog-title"),g=this.find(".caph-dialog-content"),h=this.find(".caph-dialog-buttons");return f.each(function(){a(this).wrap(d.makeTitleWrapper())}),g.each(function(){a(this).wrap(d.makeContentWrapper())}),h.each(function(){var b=a("<div>").addClass("caph-dialog-button-area"),c=a(this).addClass("button-wrapper");if(c.wrap(b),"confirm"===c.attr("button-type")){var f=d.makeDialogButton("Yes",0,e.onSelectButton,{depth:e.focusOption.depth,group:e.focusOption.group,initialFocus:!0}),g=d.makeDialogButton("No",1,e.onSelectButton,{depth:e.focusOption.depth,group:e.focusOption.group,initialFocus:!1});c.append(f),c.append(g)}else if("alert"===c.attr("button-type")){var h=d.makeDialogButton("OK",0,e.onSelectButton,{depth:e.focusOption.depth,group:e.focusOption.group,initialFocus:!0});c.append(h)}}),this.data("initialized",!0),this.data("id",c.generateDialogId()),c.addDialog(this.data("id"),this,e),this.hide(),this},open:function(b){this.show();var f=c.getDialog(this.data("id")),g=f.option;f||a.error("Dialog ("+this.data("id")+") is not registered. Is this id correct?"),g&&(g.center?d.moveToCenter(this):f.option.position&&d.translateTo(this,g.position.x,g.position.y)),c.manageModal(this.data("id"),!0);var h=a.caph.focus.controllerProvider.getInstance();if(this.data("originFocusOption",{depth:h.getCurrentDepth(),group:h.getCurrentGroup()}),h.setDepth(g.focusOption.depth,g.focusOption.group),g&&jQuery.isFunction(g.onOpen)&&g.onOpen(),this.data("timeout")&&(clearTimeout(this.data("timeout")),this.removeData("timeout")),jQuery.isNumeric(b)||g&&jQuery.isNumeric(g.timeout)){var i=setTimeout(function(){e.close.apply(this),this.removeData("timeout")}.bind(this),b||g.timeout);this.data("timeout",i)}},close:function(){var b=c.getDialog(this.data("id")),d=b.option;b||a.error("Dialog ("+this.data("id")+") is not registered. Is this id correct?"),c.manageModal(this.data("id"),!1),this.hide();var e=a.caph.focus.controllerProvider.getInstance();this.data("originFocusOption")&&e.setDepth(this.data("originFocusOption").depth,this.data("originFocusOption").group),this.data("timeout")&&(clearTimeout(this.data("timeout")),this.removeData("timeout")),d&&"function"==typeof d.onClose&&d.onClose()},destroy:function(){c.removeDialog(this.data("id")),this.remove()}};a.fn.caphDialog=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):this.data("initialized")||"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.dialog"):(this.length>1&&a.error("Select just one element for creating a dialog."),e.init.apply(this,arguments))}}(jQuery),function(a){"use strict";var b={DEFAULT:{focusableDepth:2e4}},c={translateTo:function(a,b,c){a&&a.css("transform","translate3d("+b+"px,"+c+"px, 0)")},convertTemplateToHtml:function(a,b){var c=a.replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,function(a,c){return b[c]||""});return c},makePlaceholder:function(b,c){var d=a('<div focusable class="placeholder"></div>').append(c);return a.caph.focus.Util.setData(d,b),window.MutationObserver||a.caph.focus.$$toAvailable(d),d},makeListItem:function(b,d,e,f,g){var h=a('<div class="list-container"></div>'),i=a('<div class="list-items"></div>').data({visibleItemCount:e,scrollCount:0}),j=function(b){d(a(b.currentTarget).attr("id"),b);var e=a(b.currentTarget).closest(".caph-dropdown-list");c.closeList.apply(e)};if(i.on("selected","div",j),b&&b.length>0)for(var k in b){var l=g.itemTemplate?this.convertTemplateToHtml(g.itemTemplate,b[k]):b[k].content,m=a('<div focusable class="textbox"></div>').append(a('<div class="label"></div>').append(l));a.caph.focus.Util.setData(m,f),b[k].disabled&&(m.data("disabled",!0),m.addClass("disabled")),window.MutationObserver||a.caph.focus.$$toAvailable(m),i.append(m.attr("id",b[k].id))}var n="",o="";return e&&e<b.length&&(n=g.arrowUpTemplate?a('<div class="textbox arrow-up"></div>').append(a('<div class="label center"></div>').append(g.arrowUpTemplate)):"",o=g.arrowDownTemplate?a('<div class="textbox arrow-down"></div>').append(a('<div class="label center"></div>').append(g.arrowDownTemplate)):""),h.append(n).append(i).append(o).hide()},openList:function(){var b=this.find(".list-container"),c=this.data("visibleItemCount"),f=this.data("items"),g=this.data("focusForList");b.show(),c>0&&c<f.length&&this.find(".list-items").css({height:c*this.find(".list-items>.textbox").outerHeight(),overflow:"hidden"});var k=a.caph.focus.controllerProvider.getInstance();this.find(".list-items>.textbox").each(function(){a(this).data("focusableDisabled")===!0&&a(this).data("disabled")!==!0&&(k.enable(this),a.caph.focus.$$toAvailable(this))}),k.setDepth(g.depth),a.caph.focus.controllerProvider.addBeforeKeydownHandler(d),a.caph.focus.controllerProvider.addAfterKeydownHandler(e),b.on("mouseover",i).on("mouseleave",j),setTimeout(function(){a(document).on("click",h)},0)},closeList:function(){var b=a.caph.focus.controllerProvider.getInstance();this.find(".list-items>.textbox").each(function(){b.disable(this)});var c=this.find(".list-container");c.hide();var f=this.data("focusForPlaceholder");b.setDepth(f.depth),a.caph.focus.controllerProvider.removeBeforeKeydownHandler(d),a.caph.focus.controllerProvider.removeAfterKeydownHandler(e),c.off("mouseover",i).off("mouseleave",j),a(document).off("click",h)},scrollUpDown:function(a,b,c,d){var e=a.find("div.textbox");d=Math.abs(d)||1,"up"===b&&a.data("scrollCount")>0?a.data("scrollCount",a.data("scrollCount")-d):"down"===b&&a.data("scrollCount")<e.length-c&&a.data("scrollCount",a.data("scrollCount")+d),this.translateTo(e,0,a.data("scrollCount")*e.eq(0).outerHeight()*-1)}},d=function(b){if(b.event.keyCode===a.caph.focus.Constant.DEFAULT.KEY_MAP.LEFT||b.event.keyCode===a.caph.focus.Constant.DEFAULT.KEY_MAP.RIGHT){var d=a(b.currentFocusItem).closest(".caph-dropdown-list");return c.closeList.apply(d),!1}},e=function(b){var d,e,f;if(b.event.keyCode===a.caph.focus.Constant.DEFAULT.KEY_MAP.DOWN){if(d=a(b.currentFocusItem).parent(),d.data("visibleItemCount")){e=d.find(".textbox"),f=jQuery.inArray(b.currentFocusItem,e);var g=f-d.data("scrollCount")-d.data("visibleItemCount")+1;f-d.data("scrollCount")>=d.data("visibleItemCount")&&c.scrollUpDown(d,"down",d.data("visibleItemCount"),g)}}else b.event.keyCode===a.caph.focus.Constant.DEFAULT.KEY_MAP.UP&&(d=a(b.currentFocusItem).parent(),d.data("visibleItemCount")&&(e=d.find(".textbox"),f=jQuery.inArray(b.currentFocusItem,e),f-d.data("scrollCount")<0&&c.scrollUpDown(d,"up",d.data("visibleItemCount"),d.data("scrollCount")-f)))},f=function(b){var d=a(b.currentTarget).next();c.scrollUpDown(d,"up",d.data("visibleItemCount"))},g=function(b){var d=a(b.currentTarget).prev();c.scrollUpDown(d,"down",d.data("visibleItemCount"))},h=function(){var b=a(".caph-dropdown-list");b.each(function(){"none"!==a(this).find(".list-container").css("display")&&c.closeList.apply(a(this))})},i=function(){a(document).off("click",h)},j=function(){a(document).on("click",h)},k={init:function(d){var e=d.items||[],h=d.visibleItemCount||0,i=a.caph.focus.controllerProvider.getInstance(),j=d.focusOption||{depth:i.getCurrentDepth()},k="function"==typeof d.onSelectItem?d.onSelectItem:a.noop,l={depth:j.depth+b.DEFAULT.focusableDepth||b.DEFAULT.FOCUSABLE_DEPTH,group:j.group,disabled:!0};if(this.data("visibleItemCount",h),this.data("items",e),this.data("focusForList",l),this.data("focusForPlaceholder",j),this.data("initialized"))throw a.error("This element is already initialized as a context menu.");var m=this.find(".caph-dropdown-list-placeholder-template:first").hide().html(),n=this.find(".caph-dropdown-list-item-template:first").hide().html(),o=this.find(".caph-dropdown-list-arrow-up-template:first").hide().html(),p=this.find(".caph-dropdown-list-arrow-down-template:first").hide().html();this.addClass("caph-dropdown-list");var q=c.makePlaceholder(j,m);
return q.on("selected",function(){var a=this.find(".list-container");"none"===a.css("display")?c.openList.call(this,h):c.closeList.call(this)}.bind(this)),this.append(q),this.append(c.makeListItem(e,k,h,l,{itemTemplate:n,arrowUpTemplate:o,arrowDownTemplate:p})),this.find(".arrow-up").on("click",f),this.find(".arrow-down").on("click",g),this.data("initialized",!0),this}};a.fn.caphDropdownList=function(b){return this.length<1?a.error("jQuery object is NOT selected."):this.length>1&&a.error("Select just one element for creating a dialog."),k[b]?k[b].apply(this,Array.prototype.slice.call(arguments,1)):this.data("initialized")||"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.dialog"):k.init.apply(this,arguments)}}(jQuery),function(a){"use strict";a.fn.caphInput=function(b){b=b||{};var c=a.extend({},a.fn.caphInput.defaults,b);return this.each(function(){var d=a(this);if("INPUT"!==d[0].tagName)throw a.error("CAPH INPUT Should be used with INPUTTAG");d.attr("focusable",""),a.caph.focus.Util.setData(this,b.focusOption),a.caph.focus.$$toAvailable(this),d.addClass(c.className);var e=b.type||"text",f=b.value||"",g=b.maxLength||40,h=b.placeHolder||"";d.attr("type",e),d.attr("value",f),d.attr("maxlength",g),d.attr("placeholder",h),a.caph.focus.controllerProvider.addBeforeKeydownHandler(function(b,c){var e=d.find(">input").context,f=b.currentFocusItem;if(e===f){var g=e.selectionStart,h=e.value.length,i=b.event.keyCode;return i===a.caph.focus.Constant.DEFAULT.KEY_MAP.RIGHT&&h>g||i===a.caph.focus.Constant.DEFAULT.KEY_MAP.LEFT&&g>0?!1:void 0}}),d.on("change",function(c){var e=c.target.value;d.attr("value",e),a.isFunction(b.onChanged)&&b.onChanged(c,e)}),d.on("focused",function(c,e){a.isFunction(b.onFocused)&&b.onFocused(c,e),e&&"keydown"==e.type&&d.focus()}),d.on("blurred",function(c,e){e&&"keydown"===e.type&&d.blur(),a.isFunction(b.onBlurred)&&b.onBlurred(c,e)}),d.on("selected",function(c,e){d.blur(),d.focus(),a.isFunction(b.onSelected)&&b.onSelected(c,e)})})},a.fn.caphInput.defaults={className:"caph-input"}}(jQuery),function(a,b,c){"use strict";function d(a){return{width:a.width(),height:a.height()}}function e(a){var c;return c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?a:b.getElementById(a).innerHTML,{source:c,link:_.template(c)}}function f(a,b,d){var e=c('<div style="position: absolute"></div>').addClass("jq-hide").hide(),f=c(b.source),g={};return e.appendTo(a),e.append(f),c.isFunction(d)&&d({element:e,scope:{}}),g.width=e.outerWidth(!0),g.height=e.outerHeight(!0),f.remove(),e.remove(),g}function g(a){return a>0&&a!==1/0}function h(a,b,d,e,f){var h,i,j,k,m=b.width,n=b.height,o=d.width,p=d.height,q=n/p,r=m/o;if(!g(q)||!g(r))throw new Error("The caphList's container and template view should have their own size such as width and height.");h=Math.floor(q),i=Math.floor(r),j=Math.ceil(q),k=Math.ceil(r);var s={getMaxItemViewCount:function(){return this.getItemViewCountPerPage()*(2*f+1)},getMaxPageIndex:function(a){return Math.floor((a-1)/this.getItemViewCountPerPage())},getPageIndex:function(a){return Math.floor(a/this.getItemViewCountPerPage())},getStartItemIndex:function(a){return(a-f)*this.getItemViewCountPerPage()},getNextStartItemIndex:function(a){return(a+f+1)*this.getItemViewCountPerPage()},getPosition:function(a){var b=this.getRowIndex(a),c=this.getColumnIndex(a);return{top:b*p,left:c*o,rowIndex:b,columnIndex:c}},getNextPosition:function(a,b){var c=this.getPosition(a);switch(b){case l.LEFT:c.left-=o,c.columnIndex--;break;case l.RIGHT:c.left+=o,c.columnIndex++;break;case l.UP:c.top-=p,c.rowIndex--;break;case l.DOWN:c.top+=p,c.rowIndex++}return c}};return{horizontal:c.extend({},s,{getItemViewCountPerPage:function(){return h*(i+1)},getRowIndex:function(a){return a%h},getColumnIndex:function(a){return Math.floor(a/h)},getTranslate:function(a,b){return"translate3d("+b*-o+"px, 0px, 0px)"},getScrollIndex:function(a,b){return Math.max(0,this.getColumnIndex(a)-b)},isVisibleItem:function(a,b,c){return b>=c&&c+k>b},getMouseScrollKeyCode:function(b,c){var d=b-a.left;return e>d?l.LEFT:d>m-e?l.RIGHT:0},isScrollDirection:function(a){switch(a){case l.LEFT:case l.RIGHT:return!0}return!1},getRotateItemIndex:function(a,b,c){return b>0?a:Math.min(c-1,this.getMaxColumnIndex(c)*h+a)},getMaxRowIndex:function(){return h-1},getMaxColumnIndex:function(a){return Math.floor((a-1)/h)},getScrollStartCount:function(){return i},getInitialScrollCount:function(a){return Math.min(this.getScrollStartCount(),this.getColumnIndex(a))},isPreviousDirection:function(a){return a===l.LEFT},isNextDirection:function(a){return a===l.RIGHT},getScrollCountVariation:function(a,b){return this.getColumnIndex(b)-this.getColumnIndex(a)},isReachedStart:function(a){return 0===this.getColumnIndex(a)},isReachedEnd:function(a,b){return this.getColumnIndex(a)===this.getMaxColumnIndex(b)}}),vertical:c.extend({},s,{getItemViewCountPerPage:function(){return(h+1)*i},getRowIndex:function(a){return Math.floor(a/i)},getColumnIndex:function(a){return a%i},getTranslate:function(a,b){return"translate3d(0px, "+b*-p+"px, 0px)"},getScrollIndex:function(a,b){return Math.max(0,this.getRowIndex(a)-b)},isVisibleItem:function(a,b,c){return a>=c&&c+j>a},getMouseScrollKeyCode:function(b,c){var d=c-a.top;return e>d?l.UP:d>n-e?l.DOWN:0},isScrollDirection:function(a){switch(a){case l.UP:case l.DOWN:return!0}return!1},getRotateItemIndex:function(a,b,c){return a>0?b:Math.min(c-1,this.getMaxRowIndex(c)*i+b)},getMaxRowIndex:function(a){return Math.floor((a-1)/i)},getMaxColumnIndex:function(){return i-1},getScrollStartCount:function(){return h},getInitialScrollCount:function(a){return Math.min(this.getScrollStartCount(),this.getRowIndex(a))},isPreviousDirection:function(a){return a===l.UP},isNextDirection:function(a){return a===l.DOWN},getScrollCountVariation:function(a,b){return this.getRowIndex(b)-this.getRowIndex(a)},isReachedStart:function(a){return 0===this.getRowIndex(a)},isReachedEnd:function(a,b){return this.getRowIndex(a)===this.getMaxRowIndex(b)}})}}function i(a,b,d){var e,f,g=[];for(e=0;b>e;e++)f={element:c('<div style="position: absolute"></div>').addClass("jq-hide").hide(),scope:{},onFocused:d},g.push(f),a.append(f.element);return g}function j(g,j){function m(){ha=Y.getItemViewCountPerPage(),ia=Y.getMaxItemViewCount(),ua=Y.getScrollStartCount()}function n(a){ja>za&&(na=Y.getMaxPageIndex(ja),va=Y.getInitialScrollCount(za),fa||(fa=Y.getTranslate(za,va)),ga=i($,ia,function(a,b){var d,e,f,g;b&&(d=b.type,e=c(a.currentTarget).parent().data(),f=e.listItemIndex,za!==f&&("mouseover"===d||"keydown"===d)&&(g=Y.getPageIndex(f),W(f),R(ma,g),p(f,e.listItemRowIndex,e.listItemColumnIndex,g),"keydown"===d&&y(f)),K(f))}),p(za),s(Y.getStartItemIndex(ma),Y.getNextStartItemIndex(ma),a),y(za),oa=!0)}function p(a,b,c,d){za=a,ka=b||Y.getRowIndex(a),la=c||Y.getColumnIndex(a),ma=d||Y.getPageIndex(a)}function q(){return(ia+(wa-1))%ia}function r(){return(wa+1)%ia}function s(a,b,d){for(var e;b>a&&(e=ga[wa],v(e,ya.get(a),a++,ya.getTotalCount()),wa=r(),(d||c.noop)(e)!==!1););}function t(a,b,d){for(var e;a>b;)if(wa=q(),e=ga[wa],(d||c.noop)(e,a--)===!1){wa=r();break}}function u(a,b,d){t(a,b,function(a,b){return v(a,ya.get(b),b,ya.getTotalCount()),(d||c.noop)(a)})}function v(a,b,c,d){w(a.scope,b,c,d),x(a,c)}function w(a,b,c,d){a.item=b,a.index=c,a.first=0===c,a.last=c===d-1,a.odd=!(a.even=0===(1&c))}function x(a,b){var d,e=Y.getPosition(b),f=a.element,g=a.scope;f.data({listItem:!0,listItemIndex:b,listItemRowIndex:e.rowIndex,listItemColumnIndex:e.columnIndex,isVisibleListItem:function(a,b){return Y.isVisibleItem(a,b,ta)}}).css("transform","translate3d("+e.left+"px, "+e.top+"px, 0px)"),g.item?(d=c(_.link(g)).on("focused"+k,a.onFocused),c.caph.focus.$$toAvailable(d),c.caph.focus.Util.unbindEvent(c.caph.focus.nearestFocusableFinderProvider.getInstance().$$remove(f.find("> :first-child"))),f.empty().append(d),N(a),f.removeClass("jq-hide").show()):(f.hide().addClass("jq-hide"),c.caph.focus.Util.unbindEvent(c.caph.focus.nearestFocusableFinderProvider.getInstance().$$remove(f.find("> :first-child"))),f.empty())}function y(a){var b;0===va?ta=Y.getScrollIndex(a,va):va===ua&&(ta=Y.getScrollIndex(a,va-1)),fa||(fa=Y.getTranslate(a,ta)),b=Y.getTranslate(a,ta),b!==fa&&($.css("transform",b),fa=b,ra||(ra=!0,M("onScrollStart")))}function z(){var a,b=-1;na=Y.getMaxPageIndex(ja),ja=xa.length,ma>=na-1&&(a=Y.getNextStartItemIndex(ma),t(a-1,-1,function(a,c){return a.element.hasClass("jq-hide")?void 0:(b=c,!1)}),s(b+1,a))}function A(){var a,b,c,d=!1;ja=xa.length,a=ja-1,na=Y.getMaxPageIndex(ja),ma>na?(s(Y.getStartItemIndex(na),Y.getNextStartItemIndex(na),function(a){var c;b||(c=a.element,c.data().listItemIndex+1===ja&&(b=c.find("> :first-child")))}),W(a),p(a),y(a),C(o.getCurrentFocusItem())&&o.focus(b)):ma>=na-1&&(c=Y.getNextStartItemIndex(ma),t(c-1,-1,function(c,e){var f=c.element.find("> :first-child");return f.hasClass("focused")&&(d=!0,e!==a&&o.blur(f)),e===a?(b=f,!1):void 0}),s(a+1,c),za>a?(W(a),p(a),y(a),d&&o.focus(b),K(a)):Y.isReachedEnd(za,ja)&&M("onReachEnd"))}function B(){var a=C(o.getCurrentFocusItem());a&&o.blur(),T(),n(function(b){var c=b.element;a&&za===c.data().listItemIndex&&setTimeout(function(){o.focus(c.find("> :first-child"))},0)})}function C(a){return a?(a=c(a).parent(),a.data().listItem&&$[0]===a.parent()[0]):!1}function D(){return sa}function E(){sa=!0,I()}function F(){da=setTimeout(function(){sa=!1},j.delay)}function G(){return ea}function H(a){G()||(ea=setInterval(function(){var b=za;D()||ya.isLoading()||(X(),J(Y.getNextPosition(za,a),!0),b!==za&&L(za))},j.delay))}function I(){G()&&(clearInterval(ea),ea=null)}function J(a,b){var c=Q(a);if(c){if(c.index===za)return!1;if(p(c.index,c.rowIndex,c.columnIndex,c.pageIndex),y(c.index),ya.isNeededForPrevious(za)?(ya.setOffset(ya.getOffset()-3*ya.getLoadingCount()),ya.request(function(a,b){ya.setOffset(ya.getOffset()+2*ya.getLoadingCount()),ya.prepend(a)})):ya.isNeededForNext(za)&&ya.request(function(a,b){ya.append(a),ya.setOffset(ya.getOffset()+ya.getLoadingCount())}),(b||c.force)&&c.element)return o.focus(c.element.find("> :first-child")),!1}else{if(ra)return!1;j.loop&&!b&&(T(),za=Y.getRotateItemIndex(ka,la,ja),n(function(a){var b=a.element;za===b.data().listItemIndex&&setTimeout(function(){o.focus(b.find("> :first-child"))},0)}))}}function K(a){M("onFocusItemView"),L(a)}function L(a){Y.isReachedStart(a)?M("onReachStart"):Y.isReachedEnd(a,ja)&&M("onReachEnd")}function M(a){var b=j[a]||c.noop;c.isFunction(b)&&b({itemIndex:za,rowIndex:ka,columnIndex:la,pageIndex:ma,maxPageIndex:na,itemCount:ja,itemViewCountPerPage:ha})}function N(a){var b=j.onDecorateItemView||c.noop;c.isFunction(b)&&b(a)}function O(a){return 0>a||Y.getMaxRowIndex(ja)<a}function P(a){return 0>a||Y.getMaxColumnIndex(ja)<a}function Q(a){var b,c,d,e,f,g,h,i,j=ja-1;return b=a.rowIndex,c=a.columnIndex,O(b)||P(c)?i:(ga.forEach(function(a){d=a.element,h=d.data(),h.listItemIndex===j&&(g=d),b===h.listItemRowIndex&&c===h.listItemColumnIndex&&(d.hasClass("jq-hide")?(e=j,i={rowIndex:Y.getRowIndex(e),columnIndex:Y.getColumnIndex(e),force:!0}):(e=h.listItemIndex,i={rowIndex:b,columnIndex:c,element:d}),f=Y.getPageIndex(e),R(ma,f),i.index=e,i.pageIndex=f)}),i.force&&(i.element=g),i)}function R(a,b){var c;b>a?(c=(b+qa)*ha,s(c,c+ha)):a>b&&(c=(b-qa+1)*ha-1,u(c,c-ha))}function S(){var a=d(Z),b=f($,_,j.onDecorateItemView);(ba.width!==a.width||ba.height!==a.height||ca.width!==b.width||ca.height!==b.height)&&(E(),aa=Z.offset(),ba=a,ca=b,Y=h(aa,ba,ca,pa,qa)[j.direction],m(),B(),F())}function T(){ga.forEach(function(a){c.caph.focus.Util.unbindEvent(c.caph.focus.nearestFocusableFinderProvider.getInstance().$$remove(a.element.find("> :first-child")))}),ga=null,$.empty()}function U(a){c(b).trigger({type:"keydown",keyCode:a})}function V(a){Y.isPreviousDirection(a)&&va>0?va--:Y.isNextDirection(a)&&ua>va&&va++}function W(a){va=Math.max(0,Math.min(ua,va+Y.getScrollCountVariation(za,a)))}function X(){1===va?va=0:va===ua-1&&(va=ua)}var Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa=!1,pa=j.mouseScrollAreaSize,qa=j.pageBufferSize,ra=!1,sa=!1,ta=0,ua=0,va=0,wa=0,xa=j.items,ya=j.itemLoader,za=j.initialItemIndex;if(this.update=function(){var a=xa&&xa.length;E(),oa?a>ja?z():ja>a&&A():n(),F()},this.reload=function(){E(),B(),F()},this.resize=function(){Z.trigger("resize")},this.moveLeft=function(){U(l.LEFT)},this.moveRight=function(){U(l.RIGHT)},this.moveUp=function(){U(l.UP)},this.moveDown=function(){U(l.DOWN)},xa&&ya)throw new Error('The "items" and "itemLoader" option cannot be used together.');if(ya){if(j.loop)throw new Error('Cannot use continuous circular loop mode when using "itemLoader".');if(ya=c.caph.ui.listItemLoaderProvider.$$get(ya),!ya)throw new Error("No such item loader: "+j.itemLoader)}else ya={getTotalCount:function(){return ja},get:function(a){return xa[a]},isNeededForPrevious:c.noop,isNeededForNext:c.noop,isLoading:c.noop,request:c.noop,prepend:c.noop,append:c.noop};Z=c(g).addClass(j.containerClass),Z.on("mousemove"+k,function(a){var b=Y.getMouseScrollKeyCode(a.clientX,a.clientY);0!==b?H(b):I()}).on("mouseout"+k,function(a){C(a.relatedTarget)||(I(),o.blur())}).on("resize"+k,S),aa=Z.offset(),ba=d(Z),$=c('<div style="position: absolute">').addClass(j.wrapperClass).appendTo(Z),$.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(){ra=!1,M("onScrollFinish")}),_=e(j.template),ca=f($,_,j.onDecorateItemView),Y=h(aa,ba,ca,pa,qa)[j.direction],m(),c.caph.focus.controllerProvider.addBeforeKeydownHandler(function(a){var b,c=a.event.keyCode;return D()||ya.isLoading()?!1:C(a.currentFocusItem)&&Y.isScrollDirection(c)?(E(),V(c),b=J(Y.getNextPosition(za,c)),F(),b):ra?!1:void 0}),c(a).on("resize"+k,S),xa?(ja=xa.length,n()):(ya.setLoadingCount(ia+ha),ya.setThresholdCount(ha*qa+ha),ya.initialize(function(a,b,c,d){E(),ja=b,n(),F()})),setTimeout(function(){$.css("transition",[c.caph.ui.VendorUtil.getVendorStyle("transform"),j.duration,j.ease].join(" "))},0)}var k=".caph-list",l=c.caph.focus.controllerProvider.getKeyMap(),m={ROW_COUNT:1,COLUMN_COUNT:1,DIRECTION:"horizontal",CONTAINER_CLASS:"caph-list-container",WRAPPER_CLASS:"caph-list-wrapper",DURATION:"0.5s",EASE:"ease-out",LOOP:!1,DELAY:100,MOUSE_SCROLL_AREA_SIZE:20,PAGE_BUFFER_SIZE:1},n={items:null,template:'<div style="width: 100%; height: 100%"></div>',direction:m.DIRECTION,containerClass:m.CONTAINER_CLASS,wrapperClass:m.WRAPPER_CLASS,duration:m.DURATION,ease:m.EASE,loop:m.LOOP,delay:m.DELAY,initialItemIndex:0,mouseScrollAreaSize:m.MOUSE_SCROLL_AREA_SIZE,pageBufferSize:m.PAGE_BUFFER_SIZE},o=c.caph.focus.controllerProvider.getInstance();c.fn.caphList=function(a){return a=c.extend({},n,a||{}),this.each(function(){this.caphList=new j(this,a)})}}(this,document,jQuery),function(a,b,c){"use strict";function d(a,b,c){var d=0,e=[];for(b=b||0,c=c||a.length;c>b;)e[d++]=a[b++];return e}function e(a){return a}function f(a){this.url=a.url,this.headers=a.headers,this.parameterNames=c.extend({},h,a.parameterNames||{}),this.dataType=a.dataType,this.loadingCount=a.loadingCount,this.thresholdCount=a.thresholdCount,this.onGetTotalCount=a.getTotalCount||c.noop,this.onGetItems=a.getItems||e,this.onBeforeLoad=a.onBeforeLoad||c.noop,this.onAfterLoad=a.onAfterLoad||c.noop,this.items=[],this.totalCount,this.offset=0,this.loading=!1,this.initiailzed=!1}var g={},h={page:"page",offset:"offset",count:"count",callback:"callback"};f.prototype.isInitialized=function(){return this.initiailzed},f.prototype.isLoading=function(){return this.loading},f.prototype.getTotalCount=function(){return this.totalCount},f.prototype.getCurrentCount=function(){return this.items.length},f.prototype.getLoadingCount=function(){return this.loadingCount},f.prototype.setLoadingCount=function(a){return this.loadingCount||(this.loadingCount=a),this},f.prototype.getThresholdCount=function(){return this.thresholdCount},f.prototype.setThresholdCount=function(a){return this.thresholdCount||(this.thresholdCount=a),this},f.prototype.getOffset=function(){return this.offset},f.prototype.setOffset=function(a){return this.offset=a,this},f.prototype.setHttp=function(a){return this.http=a,this},f.prototype.initialize=function(a){this.initiailzed||this.loading||this.request(function(b,d,e){if(this.append(b),this.offset+=this.loadingCount,this.totalCount=this.onGetTotalCount(d,e),null==this.totalCount)throw new Error('Check the "getTotalCount" callback function. It should return total item count as a number.');this.initiailzed=!0,(a||c.noop)(b,this.totalCount,d,e,this)}.bind(this))},f.prototype.beforeRequest=function(){this.loading=!0,this.onBeforeLoad(this)},f.prototype.afterRequest=function(a,b){if(this.onAfterLoad(a,b,this),this.loading=!1,!this.initiailzed)throw new Error("Fail to request. Please check the given url or connection.")},f.prototype.request=function(a){this.loading||(this.beforeRequest(),c.ajax({url:this.url,headers:this.headers,dataType:this.dataType,data:this.getParams(),jsonp:this.parameterNames.callback,success:function(b,d){var e=this.onGetItems(b);e&&e.length>0&&(a||c.noop)(e,b,d,this),this.afterRequest(b,d)}.bind(this),error:function(a,b){this.afterRequest(a,b)}.bind(this)}))},f.prototype.getParams=function(){var a={};return a[this.parameterNames.page]=Math.floor(this.offset/this.loadingCount)+1,a[this.parameterNames.offset]=this.offset,a[this.parameterNames.count]=this.loadingCount,a},f.prototype.isNeededForPrevious=function(a){var b=this.offset-2*this.loadingCount;return b>0&&a<b+this.thresholdCount},f.prototype.isNeededForNext=function(a){var b=this.getCurrentCount();return b<this.getTotalCount()&&b-this.thresholdCount<a},f.prototype.get=function(a){if(!this.initiailzed)throw new Error("Do not ready to use. Please use after initializing properly. Also verify whether the given url is available or not.");return this.items[a]},f.prototype.prepend=function(a){var b;this.offset>0&&(b=[],b.length=this.offset-2*this.loadingCount,this.items=b.concat(a).concat(d(this.items,this.offset-this.loadingCount,this.offset)))},f.prototype.append=function(a){var b,c;this.offset>this.loadingCount?(c=this.offset-this.loadingCount,b=[],b.length=c,this.items=b.concat(d(this.items,c)).concat(a)):this.items=this.items.concat(a)},c.caph=c.caph||{},c.caph.ui=c.caph.ui||{},c.caph.ui.listItemLoaderProvider={register:function(a,b){if(g[a])throw new Error("The given name "+a+" already has been registered.");return g[a]=new f(b||{}),this},unregister:function(a){return delete g[a],this},$$get:function(a){return g[a]}},c.caph.focus.controllerProvider.addBeforeKeydownHandler(function(){return Object.keys(g).some(function(a){return g[a].isLoading()?!0:void 0})?!1:void 0},-1e3)}(this,document,jQuery),function(a){"use strict";var b={radioCount:0,_radios:{},addRadio:function(a,b){this._radios[b]=this._radios[b]||[],this._radios[b].push(a),console.log(this._radios[b])},selectRadio:function(a,b){for(var c in this._radios[b])void 0!==this._radios[b][c].attr("selected")&&(this._radios[b][c].removeClass("selected"),this._radios[b][c].removeAttr("selected"));void 0===a.attr("selected")&&a.attr("selected",""),a.addClass("selected")}};a.fn.caphRadiobutton=function(c){c=c||{};var d=a.extend({},a.fn.caphRadiobutton.defaults,c);return this.each(function(){var e=c.selected||!1,f=c.group||"default",g=a(this);g.attr("focusable",""),a.caph.focus.Util.setData(this,c.focusOption),a.caph.focus.$$toAvailable(this),g.addClass(d.className),b.addRadio(g,f),e&&(b.selectRadio(g,f),g.attr("selected")),g.on("focused",function(b,d){a.isFunction(c.onFocused)&&c.onFocused(b,d)}),g.on("blurred",function(b,d){a.isFunction(c.onBlurred)&&c.onBlurred(b,d)}),g.on("selected",function(d,e){b.selectRadio(g,f),a.isFunction(c.onSelected)&&c.onSelected(d,e)})})},a.fn.caphRadiobutton.defaults={className:"caph-radiobutton"}}(jQuery),function(a,b,c){"use strict";function d(a){var b,c,d=a.charAt(0).toUpperCase()+a.substr(1);return null===g?(b=f.style,a in b?(g="",a):(e.some(function(a){return c=a+d,c in b?(g=a,!0):void 0}),f=null,c)):g?g+d:a}var e=["Webkit","Moz","O","ms"],f=b.createElement("div"),g=null;["transform","transition"].forEach(function(a){var b=d(a);b!==a&&(c.cssHooks[a]={get:function(a){return c.css(a,b)},set:function(a,c){a.style[b]=c}})}),c.caph=c.caph||{},c.caph.ui=c.caph.ui||{},c.caph.ui.VendorUtil={getVendorProperty:d,getVendorStyle:function(a){var b=d(a);return b!==a?"-"+b.replace(/[A-Z]/g,function(a,b){var c=a.toLowerCase();return 0===b?c:"-"+c}):b}}}(this,document,jQuery);